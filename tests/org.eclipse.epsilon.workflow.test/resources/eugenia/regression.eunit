@data elems
operation data() {
  return Sequence {
    Sequence { 'http://www.eclipse.org/emf/2002/Ecore', 'ecore' },
    Sequence { 'http://www.eclipse.org/emf/2002/GenModel', 'genmodel' },
    Sequence { 'http://www.eclipse.org/gmf/2006/GraphicalDefinition', 'gmfgraph' },
    Sequence { 'http://www.eclipse.org/gmf/2005/ToolDefinition', 'gmftool' },
    Sequence { 'http://www.eclipse.org/gmf/2008/mappings', 'gmfmap' },
    Sequence { 'http://www.eclipse.org/gmf/2009/GenModel', 'gmfgen' }
  };
}

@model
operation loadModels() {
  loadModel('Expected', direxpected);
  loadModel('Obtained', dirtemp);
}

@test
operation testForRegressions() {
  assertEqualModels('Expected', 'Obtained');
}

operation loadModel(modelName, directory) {
  var metamodelUri   := elems.get(0);
  var modelExtension := elems.get(1);

  var task := antProject.createTask('epsilon.emf.loadModel');
  task.setName(modelName);
  task.setModelFile(new Native('java.io.File')(
    directory + '/' + casename + '.' + modelExtension));
  task.setMetamodelUri(metamodelUri);
  task.setRead(true);
  task.setStore(false);
  task.execute();
}
